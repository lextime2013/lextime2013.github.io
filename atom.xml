<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>lex雷克斯vIp</title>
  <subtitle>我的世界我的梦</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-05-31T16:19:46.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>lextime2013</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Android蓝牙通信</title>
    <link href="http://yoursite.com/2016/05/30/Android%E8%93%9D%E7%89%99%E9%80%9A%E4%BF%A1/"/>
    <id>http://yoursite.com/2016/05/30/Android蓝牙通信/</id>
    <published>2016-05-30T14:04:37.000Z</published>
    <updated>2016-05-31T16:19:46.000Z</updated>
    
    <content type="html">&lt;p&gt;近来工作做了很多Android手机对接蓝牙设备的工作，记录一下。&lt;/p&gt;
&lt;h5 id=&quot;场景&quot;&gt;&lt;a href=&quot;#场景&quot; class=&quot;headerlink&quot; title=&quot;场景&quot;&gt;&lt;/a&gt;场景&lt;/h5&gt;&lt;p&gt;需要对接蓝牙设备，发送或者获取数据，比如蓝牙打印机、蓝牙体脂称、蓝牙电子血压计、蓝牙血糖仪、蓝牙身高尺等等。大致的过程就是手机跟设备互相连接认证，互传数据的过程。当然，对接不同的设备，会有不同的交互流程，同一类设备，针对不同厂商，也需要遵循不同厂商定制的SDK的相关协议。但都离不开蓝牙的核心协议，下面分经典蓝牙2.0以及低功耗蓝牙4.0（BLE）。&lt;/p&gt;
&lt;h5 id=&quot;经典蓝牙2-0&quot;&gt;&lt;a href=&quot;#经典蓝牙2-0&quot; class=&quot;headerlink&quot; title=&quot;经典蓝牙2.0&quot;&gt;&lt;/a&gt;经典蓝牙2.0&lt;/h5&gt;&lt;p&gt;比较传统的设备只支持蓝牙2.0，SPP协议、HDP协议&lt;br&gt;过程：扫描，配对，连接，通信&lt;/p&gt;
&lt;p&gt;参考：&lt;a href=&quot;http://blog.csdn.net/q610098308/article/details/45248423&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android 蓝牙开发基本流程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;1、通用UUID：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private static final UUID SPP_UUID = UUID.fromString(&amp;quot;00001101-0000-1000-8000-00805F9B34FB&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2、配对，反射设置密码（如果需要设置的话）&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Method removeBondMethod = btClass.getDeclaredMethod(&amp;quot;setPin&amp;quot;,  new Class[] &amp;#123; byte[].class &amp;#125;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;return value = (Boolean) removeBondMethod.invoke(bluetoothDevice,  new Object[] &amp;#123; password.getBytes() &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、配对，反射调用绑定方法&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Method createBondMethod = btClass.getMethod(&amp;quot;createBond&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Boolean value = (Bovolean) createBondMethod.invoke(btDevice);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;4、连接，根据不同SDK方式&lt;br&gt;问题：getBluetoothService() called with no BluetoothManagerCallback&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int sdk = Build.VERSION.SDK_INT;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if (sdk &amp;gt;= 10) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    socket = mDevice.createInsecureRfcommSocketToServiceRecord(SPP_UUID);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    socket = mDevice.createRfcommSocketToServiceRecord(SPP_UUID);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;低功耗蓝牙4-0技术（BLE）&quot;&gt;&lt;a href=&quot;#低功耗蓝牙4-0技术（BLE）&quot; class=&quot;headerlink&quot; title=&quot;低功耗蓝牙4.0技术（BLE）&quot;&gt;&lt;/a&gt;低功耗蓝牙4.0技术（BLE）&lt;/h5&gt;&lt;p&gt;注意：从Android4.3（API-18）开始支持BLE，但只支持作为中心设备模式Central，也就是只支持Android设备主动扫描连接外围设备Peripheral，在Android5.0（API-21）两种模式都支持。蓝牙4.0将三种规格集一体，包括传统蓝牙技术、高速技术和低耗能技术&lt;/p&gt;
&lt;p&gt;参考：&lt;a href=&quot;http://blog.csdn.net/zhaoshuzhaoshu/article/details/35281301/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;最全最详细的蓝牙版本介绍包含蓝牙4.0和4.1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;过程：扫描，连接，发现服务，通信&lt;/p&gt;
&lt;p&gt;1、获取BluetoothAdapter&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BluetoothManager bluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mBluetoothAdapter = bluetoothManager.getAdapter();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2、判断是否支持蓝牙，并打开蓝牙(利用系统Intent的方式请求打开蓝牙)&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;if (mBluetoothAdapter == null || !mBluetoothAdapter.isEnabled()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、搜索BLE设备&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mBluetoothAdapter.startLeScan(mLeScanCallback);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BluetoothAdapter.LeScanCallback // 搜索回调&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意：搜索时，你只能搜索传统蓝牙设备或者BLE设备，两者完全独立，不可同时被搜索。&lt;br&gt;实际使用：使用经典蓝牙搜索方式startDiscovery()能同时搜索到百捷2.0和百捷4.0的设备&lt;/p&gt;
&lt;p&gt;4、连接GATT Server&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mBluetoothGatt = device.connectGatt(this, false, mGattCallback);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BluetoothGattCallback // 连接回调&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;5、连接成功。BluetoothGatt常规用到的几个操作示例&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;connect(); // 连接远程设备。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;discoverServices(); // 搜索连接设备所支持的service。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;disconnect(); // 断开与远程设备的GATT连接。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;close(); // 关闭GATT Client端。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;readCharacteristic(characteristic); // 读取指定的characteristic。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setCharacteristicNotification(characteristic, enabled); // 设置当指定characteristic值变化时，发出通知。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;getServices(); // 获取远程设备所支持的services。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;一些实践心得&quot;&gt;&lt;a href=&quot;#一些实践心得&quot; class=&quot;headerlink&quot; title=&quot;一些实践心得&quot;&gt;&lt;/a&gt;一些实践心得&lt;/h5&gt;&lt;h6 id=&quot;关于蓝牙硬件&quot;&gt;&lt;a href=&quot;#关于蓝牙硬件&quot; class=&quot;headerlink&quot; title=&quot;关于蓝牙硬件&quot;&gt;&lt;/a&gt;关于蓝牙硬件&lt;/h6&gt;&lt;p&gt;对接蓝牙设备，一方面由于蓝牙设备的多样性，另一方面Android手机硬件、系统的多样性，会遇到比较多的问题就是蓝牙连接的稳定性问题。关于这个问题也是尝试了很多种方法去避免，分析其中一个原因就是：由代码驱动蓝牙硬件的过程，需要一定的时间，一定的时间等待，会带来极大稳定性的提高。比如启动蓝牙后延迟300ms在执行其他操作。另一个就是可以采用线程轮询判断一个状态是否已经启动，比如循环5次，每隔1秒执行判断操作。&lt;/p&gt;
&lt;h6 id=&quot;关于优化&quot;&gt;&lt;a href=&quot;#关于优化&quot; class=&quot;headerlink&quot; title=&quot;关于优化&quot;&gt;&lt;/a&gt;关于优化&lt;/h6&gt;&lt;p&gt;必要时，考虑采用服务Service去获取设备的数据，或者设置单例模式。&lt;/p&gt;
&lt;p&gt;如有错误，欢迎拍砖！&lt;/p&gt;
&lt;p&gt;（呆完善）&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;近来工作做了很多Android手机对接蓝牙设备的工作，记录一下。&lt;/p&gt;
&lt;h5 id=&quot;场景&quot;&gt;&lt;a href=&quot;#场景&quot; class=&quot;headerlink&quot; title=&quot;场景&quot;&gt;&lt;/a&gt;场景&lt;/h5&gt;&lt;p&gt;需要对接蓝牙设备，发送或者获取数据，比如蓝牙打印机、蓝牙体脂
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>容易犯错的知识点</title>
    <link href="http://yoursite.com/2016/05/29/%E5%AE%B9%E6%98%93%E7%8A%AF%E9%94%99%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <id>http://yoursite.com/2016/05/29/容易犯错的知识点/</id>
    <published>2016-05-28T16:27:00.000Z</published>
    <updated>2016-05-28T16:28:32.000Z</updated>
    
    <content type="html">&lt;h5 id=&quot;JAVA篇&quot;&gt;&lt;a href=&quot;#JAVA篇&quot; class=&quot;headerlink&quot; title=&quot;JAVA篇&quot;&gt;&lt;/a&gt;JAVA篇&lt;/h5&gt;&lt;p&gt;1、强转，(String)msg.obj —&amp;gt; (String)null，可以执行&lt;/p&gt;
&lt;p&gt;2、遍历，String str : List&lt;string&gt;，如果list是null会崩溃&lt;/string&gt;&lt;/p&gt;
&lt;p&gt;3、集合添加，list.add(null)，可以执行，但list.addAll(null)，会崩溃&lt;/p&gt;
&lt;p&gt;4、包装类型，String.valueOf(null); 会崩溃&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;JAVA篇&quot;&gt;&lt;a href=&quot;#JAVA篇&quot; class=&quot;headerlink&quot; title=&quot;JAVA篇&quot;&gt;&lt;/a&gt;JAVA篇&lt;/h5&gt;&lt;p&gt;1、强转，(String)msg.obj —&amp;gt; (String)null，可以执行&lt;/p&gt;
&lt;p&gt;2、遍历，S
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Eclipse项目迁移到Android Studio的一种方式</title>
    <link href="http://yoursite.com/2016/05/23/Eclipse%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB%E5%88%B0Android%20Studio%E7%9A%84%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
    <id>http://yoursite.com/2016/05/23/Eclipse项目迁移到Android Studio的一种方式/</id>
    <published>2016-05-23T13:52:23.000Z</published>
    <updated>2016-05-29T07:13:31.000Z</updated>
    
    <content type="html">&lt;h5 id=&quot;题外话&quot;&gt;&lt;a href=&quot;#题外话&quot; class=&quot;headerlink&quot; title=&quot;题外话&quot;&gt;&lt;/a&gt;题外话&lt;/h5&gt;&lt;p&gt;不知道你们公司是不是还停留在eclipse IDE呢，是不是觉得由于项目依赖太麻烦就一直没迁移过去呢。Android Studio 2.0 都发布第三版预览版本了，Google也早已停止了对ADT插件的更新。&lt;/p&gt;
&lt;p&gt;但将老项目迁移过去确实有点麻烦，各种项目依赖、各种gradle build…什么的导致崩溃卡机。我已被虐过千百遍，但依然对它如初恋。我实践了一种方式，下面主要讲一下大体思路，对gradle完全不熟悉的话可能会被省去了一些细节。&lt;/p&gt;
&lt;h5 id=&quot;基本准备&quot;&gt;&lt;a href=&quot;#基本准备&quot; class=&quot;headerlink&quot; title=&quot;基本准备&quot;&gt;&lt;/a&gt;基本准备&lt;/h5&gt;&lt;p&gt;下载android studio，我这里用android studio1.3、1.4都试过，&lt;br&gt;新建一个工程，都是默认，确保这个工程能运行。然后看看这个工程文件，目录结构&lt;br&gt;这里写图片描述&lt;br&gt;.gradle、.idea、build、都是运行时产生，删除。重要的是gradle文件夹，gradlew，gradlew.bat，build.gradle，setting.gradle。然后熟悉其他文件是干嘛用的，是否删除或修改取决于你原来的eclipse项目。&lt;/p&gt;
&lt;h5 id=&quot;新建文件夹然后copy工作&quot;&gt;&lt;a href=&quot;#新建文件夹然后copy工作&quot; class=&quot;headerlink&quot; title=&quot;新建文件夹然后copy工作&quot;&gt;&lt;/a&gt;新建文件夹然后copy工作&lt;/h5&gt;&lt;p&gt;新建一个文件夹，按照上面MyApplication的目录结构，copy一份，其中需要从eclipse项目中迁移过来的有src源代码，还有res资源，注意修改主工程build.gradle里面的applicationId。然后用Android Studio打开新建的项目即可。&lt;/p&gt;
&lt;h5 id=&quot;如何解决项目依赖&quot;&gt;&lt;a href=&quot;#如何解决项目依赖&quot; class=&quot;headerlink&quot; title=&quot;如何解决项目依赖&quot;&gt;&lt;/a&gt;如何解决项目依赖&lt;/h5&gt;&lt;p&gt;很多情况下，并不想把原来的project变成一个module，所以有了工程中的module依赖。这里需要手动配置setting.gradle文件，添加&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;include &amp;apos;:projectName&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;project(&amp;apos;:projectName&amp;apos;).projectDir = new File(settingsDir, &amp;apos;../projectName/moduleName&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后在主工程的module的build.gradle文件里面添加&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dependencies &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    compile project(&amp;apos;:projectName&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;同步一下，这里就实现了对工程projectName中的module依赖。&lt;br&gt;可以参考：&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/avenwu/p/4299340.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/avenwu/p/4299340.html&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&quot;遇到的一些问题&quot;&gt;&lt;a href=&quot;#遇到的一些问题&quot; class=&quot;headerlink&quot; title=&quot;遇到的一些问题&quot;&gt;&lt;/a&gt;遇到的一些问题&lt;/h5&gt;&lt;p&gt;1、Android6.0在api 23以上没有了apache的包，也就是没有了HttpClient等网络相关的类，需要使用的可以从以下路径找到，&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;**\android-sdk-windows\platforms\android-23\optional&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;copy到工程的libs里面，并在build.gradle里面添加：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;useLibrary &amp;apos;org.apache.http.legacy&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2、主工程module的build.gradle里面是&lt;/p&gt;
&lt;p&gt;apply plugin: ‘com.android.application’&lt;/p&gt;
&lt;p&gt;依赖工程module的build.gradle里面应该是依赖库的形式&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;com.android.library&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、依赖工程里面不需要applicationId。&lt;/p&gt;
&lt;p&gt;4、androidManifest.xml里面的appIication icon冲突可以删除或修改，错误日志：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Error:Execution failed for task &amp;apos;:app:processDebugManifest&amp;apos;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; Manifest merger failed : Attribute application@icon value=(@drawable/logo) from AndroidManifest.xml:49:9-38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; is also present at&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;5、引用重复的jar包，删除其中一个，错误日志：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Error:Execution failed for task &amp;apos;:app:dexDebug&amp;apos;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process &amp;apos;command &amp;apos;D:\Program Files\Java\jdk1.7.0_80\bin\java.exe&amp;apos;&amp;apos; finished with non-zero exit value 2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;6、错误日志：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Error:Execution failed for task &amp;apos;:app:packageDebug&amp;apos;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; Duplicate files copied in APK META-INF/LICENSE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;按照提示，添加：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;android &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    packagingOptions &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exclude &amp;apos;META-INF/LICENSE&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exclude &amp;apos;META-INF/DEPENDENCIES&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exclude &amp;apos;META-INF/NOTICE&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exclude &amp;apos;META-INF/LICENSE.txt&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exclude &amp;apos;META-INF/NOTICE.txt&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h5&gt;&lt;p&gt;也就是将标准Android Studio工程里面的gradle相关文件原汁原味的copy到另外一个新建的、具有相同目录结构的文件夹里面，做一些相应的配置修改。打开Android Studio运行。&lt;/p&gt;
&lt;h5 id=&quot;为什么使用这种方式？&quot;&gt;&lt;a href=&quot;#为什么使用这种方式？&quot; class=&quot;headerlink&quot; title=&quot;为什么使用这种方式？&quot;&gt;&lt;/a&gt;为什么使用这种方式？&lt;/h5&gt;&lt;p&gt;网上比较多的教程是eclipse导出gradle项目，生成build.gradle文件，再用android studio导入，我会觉得这个项目有点奇葩，各种ant、gradle构建的东西混杂在一起（对不起，我有代码洁癖），还会因为gradle构建版本的各种问题而运行不起来，而且项目依赖也并不怎么清晰。或许还有更简便的方法，我在瞎折腾了。&lt;/p&gt;
&lt;h5 id=&quot;最后&quot;&gt;&lt;a href=&quot;#最后&quot; class=&quot;headerlink&quot; title=&quot;最后&quot;&gt;&lt;/a&gt;最后&lt;/h5&gt;&lt;p&gt;最后想说明一点，这是其中一种方式，我实践可用，记录下来一方面自己学习温故，另一方面希望能帮到一些人，这个方法或许有不足之处，希望指正。gradle配置方面还有很多，有些没涉及到的可能还需要添加其他的配置代码。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;题外话&quot;&gt;&lt;a href=&quot;#题外话&quot; class=&quot;headerlink&quot; title=&quot;题外话&quot;&gt;&lt;/a&gt;题外话&lt;/h5&gt;&lt;p&gt;不知道你们公司是不是还停留在eclipse IDE呢，是不是觉得由于项目依赖太麻烦就一直没迁移过去呢。Android Studio 
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2016/05/22/hello-world/"/>
    <id>http://yoursite.com/2016/05/22/hello-world/</id>
    <published>2016-05-22T11:56:19.000Z</published>
    <updated>2016-05-22T11:56:19.000Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
